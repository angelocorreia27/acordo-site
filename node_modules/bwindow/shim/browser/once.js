/**
 * Bind window event once
 * @function once
 * @param {string} event - Event to bind
 * @param {function} handler - Event handler
 * @returns {function} - Function to cancel the binding
 */
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _assign = _interopRequireDefault(require("@babel/runtime/core-js/object/assign"));

var get = require('./get');
/** @lends once */


function once(event, handler) {
  var window = get('window', {
    strict: true
  });

  var binding = function onceWrap() {
    window.removeEventListener(event, binding);
    handler.apply(void 0, arguments);
  };

  window.addEventListener(event, binding);

  var cancel = function cancel() {
    return window.removeEventListener(event, binding);
  };

  return (0, _assign.default)(cancel, {
    cancel: cancel
  });
}

module.exports = once;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwibmFtZXMiOlsiZ2V0IiwicmVxdWlyZSIsIm9uY2UiLCJldmVudCIsImhhbmRsZXIiLCJ3aW5kb3ciLCJzdHJpY3QiLCJiaW5kaW5nIiwib25jZVdyYXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbmNlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBT0E7Ozs7OztBQUVBLElBQU1BLE1BQU1DLFFBQVEsT0FBUixDQUFaO0FBRUE7OztBQUNBLFNBQVNDLElBQVQsQ0FBZUMsS0FBZixFQUFzQkMsT0FBdEIsRUFBK0I7QUFDN0IsTUFBTUMsU0FBU0wsSUFBSSxRQUFKLEVBQWM7QUFBRU0sWUFBUTtBQUFWLEdBQWQsQ0FBZjs7QUFDQSxNQUFJQyxVQUFVLFNBQVNDLFFBQVQsR0FBNEI7QUFDeENILFdBQU9JLG1CQUFQLENBQTJCTixLQUEzQixFQUFrQ0ksT0FBbEM7QUFDQUg7QUFDRCxHQUhEOztBQUlBQyxTQUFPSyxnQkFBUCxDQUF3QlAsS0FBeEIsRUFBK0JJLE9BQS9COztBQUNBLE1BQUlJLFNBQVMsU0FBVEEsTUFBUztBQUFBLFdBQU1OLE9BQU9JLG1CQUFQLENBQTJCTixLQUEzQixFQUFrQ0ksT0FBbEMsQ0FBTjtBQUFBLEdBQWI7O0FBQ0EsU0FBTyxxQkFBY0ksTUFBZCxFQUFzQjtBQUFFQTtBQUFGLEdBQXRCLENBQVA7QUFDRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQlgsSUFBakIiLCJzb3VyY2VSb290IjoiLi4vLi4vbGliIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCaW5kIHdpbmRvdyBldmVudCBvbmNlXG4gKiBAZnVuY3Rpb24gb25jZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdG8gYmluZFxuICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlciAtIEV2ZW50IGhhbmRsZXJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn0gLSBGdW5jdGlvbiB0byBjYW5jZWwgdGhlIGJpbmRpbmdcbiAqL1xuJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGdldCA9IHJlcXVpcmUoJy4vZ2V0JylcblxuLyoqIEBsZW5kcyBvbmNlICovXG5mdW5jdGlvbiBvbmNlIChldmVudCwgaGFuZGxlcikge1xuICBjb25zdCB3aW5kb3cgPSBnZXQoJ3dpbmRvdycsIHsgc3RyaWN0OiB0cnVlIH0pXG4gIGxldCBiaW5kaW5nID0gZnVuY3Rpb24gb25jZVdyYXAgKC4uLmFyZ3MpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgYmluZGluZylcbiAgICBoYW5kbGVyKC4uLmFyZ3MpXG4gIH1cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGJpbmRpbmcpXG4gIGxldCBjYW5jZWwgPSAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgYmluZGluZylcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY2FuY2VsLCB7IGNhbmNlbCB9KVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2VcbiJdfQ==